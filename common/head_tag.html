<script 
src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.js">
</script>

<script type="text/discourse-plugin" version="0.8.18">
//------------------------------------------
// I18n Translations
//------------------------------------------
$(document).ready(function() {
  I18n.translations.en.js.composer.slick_add_images_prompt =
    settings.Slick_add_images_prompt;
  I18n.translations.en.js.slick_gallery_button = settings.Slick_button_text;
});

//------------------------------------------
// initialize slick
//------------------------------------------
var slick_selector = '.cooked div[data-theme-slick="1"]';

api.decorateCooked($elem =>
  $elem
    .children(slick_selector)
    .not(".slick-initialized")
    .slick({
      dots: true,
      infinite: true,
      centerMode: true,
      mobileFirst: true,
      slide: ".lightbox-wrapper",
      speed: 200,
      fade: true,
      cssEase: "linear"
    })
);

//------------------------------------------
// Add a button to the composer toolbar
//------------------------------------------
api.onToolbarCreate(function(toolbar) {
  toolbar.addButton({
    trimLeading: true,
    id: "SlickGallery",
    group: "insertions",
    icon: settings.Slick_button_icon,
    title: "slick_gallery_button",
    perform: function perform(e) {
      return e.applySurround(
        '<div data-theme-slick="1">\n\n',
        "\n\n</div>",
        "slick_add_images_prompt"
      );
    }
  });
});
</script>
